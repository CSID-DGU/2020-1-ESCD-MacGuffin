{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\BumSu Park\\\\React\\\\macguffin\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\BumSu Park\\\\React\\\\macguffin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\BumSu Park\\\\React\\\\macguffin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\BumSu Park\\\\React\\\\macguffin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Users\\\\BumSu Park\\\\React\\\\macguffin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\BumSu Park\\\\React\\\\macguffin\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{AuthContent,InputWithLabel,AuthButton,RightAlignedLink,AuthError}from'components/Auth';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as authActions from'redux/modules/auth';import*as userActions from'redux/modules/user';import storage from'lib/storage';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleChange=function(e){var AuthActions=_this.props.AuthActions;var _e$target=e.target,name=_e$target.name,value=_e$target.value;AuthActions.changeInput({name:name,value:value,form:'login'});};_this.setError=function(message){var AuthActions=_this.props.AuthActions;AuthActions.setError({form:'login',message:message});return false;};_this.handleLocalLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props,form,AuthActions,UserActions,history,_form$toJS,email,password,loggedInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,form=_this$props.form,AuthActions=_this$props.AuthActions,UserActions=_this$props.UserActions,history=_this$props.history;_form$toJS=form.toJS(),email=_form$toJS.email,password=_form$toJS.password;_context.prev=2;_context.next=5;return AuthActions.localLogin({password:password});case 5:loggedInfo=_this.props.result.toJS();UserActions.setLoggedInfo(loggedInfo);history.push('/');storage.set('loggedInfo',loggedInfo);_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);console.log('a');_this.setError(' 잘못된 계정정보입니다.');case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return _this;}_createClass(Login,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){var AuthActions=this.props.AuthActions;AuthActions.initializeForm('login');}},{key:\"render\",value:function render(){var _this$props$form$toJS=this.props.form.toJS(),email=_this$props$form$toJS.email,password=_this$props$form$toJS.password;// form 에서 email 과 password 값을 읽어옴\nvar handleChange=this.handleChange;var error=this.props.error;return/*#__PURE__*/React.createElement(AuthContent,{title:\"\\uB85C\\uADF8\\uC778\"},/*#__PURE__*/React.createElement(InputWithLabel,{label:\"\\uC774\\uBA54\\uC77C\",name:\"email\",placeholder:\"\\uC774\\uBA54\\uC77C\",value:email,onChange:handleChange}),/*#__PURE__*/React.createElement(InputWithLabel,{label:\"\\uBE44\\uBC00\\uBC88\\uD638\",name:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",type:\"password\",value:password,onChange:handleChange}),error&&/*#__PURE__*/React.createElement(AuthError,null,error),/*#__PURE__*/React.createElement(AuthButton,{onClick:this.handleLocalLogin},\"\\uB85C\\uADF8\\uC778\"),/*#__PURE__*/React.createElement(RightAlignedLink,{to:\"/auth/register\"},\"\\uD68C\\uC6D0\\uAC00\\uC785\"));}}]);return Login;}(Component);export default connect(function(state){return{form:state.auth.getIn(['login','form']),error:state.auth.getIn(['login','error']),result:state.auth.get('result')};},function(dispatch){return{AuthActions:bindActionCreators(authActions,dispatch),UserActions:bindActionCreators(userActions,dispatch)};})(Login);","map":{"version":3,"sources":["C:/Users/BumSu Park/React/macguffin/src/containers/Auth/Login.js"],"names":["React","Component","AuthContent","InputWithLabel","AuthButton","RightAlignedLink","AuthError","connect","bindActionCreators","authActions","userActions","storage","Login","handleChange","e","AuthActions","props","target","name","value","changeInput","form","setError","message","handleLocalLogin","UserActions","history","toJS","email","password","localLogin","loggedInfo","result","setLoggedInfo","push","set","console","log","initializeForm","error","state","auth","getIn","get","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { AuthContent, InputWithLabel, AuthButton, RightAlignedLink, AuthError } from 'components/Auth';\r\nimport { connect } from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as authActions from 'redux/modules/auth';\r\nimport * as userActions from 'redux/modules/user';\r\nimport storage from 'lib/storage';\r\n\r\nclass Login extends Component {\r\n\r\n    handleChange = (e) => {\r\n        const { AuthActions } = this.props;\r\n        const { name, value } = e.target;\r\n\r\n        AuthActions.changeInput({\r\n            name,\r\n            value,\r\n            form: 'login'\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {AuthActions} = this.props;\r\n        AuthActions.initializeForm('login')\r\n    }\r\n\r\n    setError = (message) => {\r\n        const {AuthActions} = this.props;\r\n        AuthActions.setError({\r\n            form: 'login',\r\n            message\r\n        });\r\n        return false;\r\n    }\r\n\r\n    handleLocalLogin = async()=>{\r\n        const{form, AuthActions, UserActions, history}= this.props;\r\n        const {email, password} = form.toJS();\r\n\r\n        try {\r\n            await AuthActions.localLogin({password});\r\n            const loggedInfo = this.props.result.toJS();\r\n\r\n            UserActions.setLoggedInfo(loggedInfo);\r\n            history.push('/');\r\n            storage.set('loggedInfo', loggedInfo);\r\n        } catch(e) {\r\n            console.log('a');\r\n            this.setError(' 잘못된 계정정보입니다.');\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const { email, password } = this.props.form.toJS(); // form 에서 email 과 password 값을 읽어옴\r\n        const { handleChange } = this;\r\n        const { error } = this.props;\r\n\r\n        return (\r\n            <AuthContent title=\"로그인\">\r\n                <InputWithLabel \r\n                    label=\"이메일\" \r\n                    name=\"email\" \r\n                    placeholder=\"이메일\" \r\n                    value={email} \r\n                    onChange={handleChange}\r\n                />\r\n                <InputWithLabel \r\n                    label=\"비밀번호\" \r\n                    name=\"password\" \r\n                    placeholder=\"비밀번호\" \r\n                    type=\"password\" \r\n                    value={password} \r\n                    onChange={handleChange}\r\n                />\r\n                {\r\n                    error && <AuthError>{error}</AuthError>\r\n                }\r\n                <AuthButton onClick={this.handleLocalLogin}>로그인</AuthButton>\r\n                <RightAlignedLink to=\"/auth/register\">회원가입</RightAlignedLink>\r\n            </AuthContent>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.auth.getIn(['login', 'form']),\r\n        error: state.auth.getIn(['login','error']),\r\n        result: state.auth.get('result')\r\n    }),\r\n    (dispatch) => ({\r\n        AuthActions: bindActionCreators(authActions, dispatch),\r\n        UserActions: bindActionCreators(userActions, dispatch)\r\n    })\r\n)(Login);"]},"metadata":{},"sourceType":"module"}